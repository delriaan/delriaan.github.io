<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chionesu George">
<meta name="dcterms.date" content="2023-07-13">

<title>Exploring the MDRP Database - Data Retrieval</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.3/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script src="site_libs/mathjax-2.7.5/cdn.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Exploring the MDRP Database</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./etl.html" rel="" target="" aria-current="page">
 <span class="menu-text">ETL</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./question1.html" rel="" target="">
 <span class="menu-text">Question I</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./question2.html" rel="" target="">
 <span class="menu-text">Question II</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Retrieval</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Chionesu George </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 13, 2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">November 23, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Data Wrangling</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Master Drug Data</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Retrieve and Prepare Data</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">NDC Format Inspection</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>The data were retrieved via R package <a href="https://httr.r-lib.org">httr</a> with some initial conversion to <a href="https://rdatatable.gitlab.io/data.table/">data.table</a> objects. Core objects were cached to disk (<a href="https://cachem.r-lib.org">cachem</a>) for easy retrieval after the initial pull.</p>
<section id="data-sets" class="level4">
<h4 class="anchored" data-anchor-id="data-sets">Data Sets</h4>
<div class="cell">
<details open="">
<summary>MDRP Data</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="st">"global_api_data"</span> <span class="sc">%in%</span> .cache<span class="sc">$</span><span class="fu">keys</span>()){ </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  download_temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.character</span>(urls<span class="sc">$</span>data) <span class="sc">|&gt;</span> </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stri_extract_all_regex</span>(<span class="st">"http.+csv"</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.vector</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(<span class="at">destfile =</span> download_temp) </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  api_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(download_temp) <span class="sc">|&gt;</span> </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.table</span>(<span class="at">na.rm =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modify_at</span>(<span class="fu">ls</span>(., <span class="at">pattern =</span> <span class="st">"(NDC|Code)$"</span>), as.character) <span class="sc">%&gt;%</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modify_at</span>(<span class="fu">ls</span>(., <span class="at">pattern =</span> <span class="st">"Date"</span>), lubridate<span class="sc">::</span>mdy) <span class="sc">%&gt;%</span> </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setnames</span>(<span class="fu">stri_replace_all_fixed</span>(<span class="fu">names</span>(.), <span class="st">"."</span>, <span class="st">" "</span>));</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cache_prep</span>(api_data) <span class="sc">|&gt;</span> <span class="fu">cache_save</span>(.cache);</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="st">"api_data"</span> <span class="sc">%in%</span> <span class="fu">ls</span>()){ </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cache_load</span>(.cache, <span class="st">"global_api_data"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Formatting updates include the following:</p>
<ul>
<li>Convert field ‘NDC’ and fields ending in ‘Code’ to characters (numeral-encoded nominal values)</li>
<li>Converting date fields to date format</li>
<li>Replace ‘.’ in field names with ’ ’</li>
</ul>
<div class="cell">
<details>
<summary>Retrieve the data dictionary</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="st">"global_api_dictionary"</span> <span class="sc">%in%</span> .cache<span class="sc">$</span><span class="fu">keys</span>()){ </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  api_dictionary <span class="ot">&lt;-</span> <span class="fu">invisible</span>( </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>(urls<span class="sc">$</span>data) <span class="sc">|&gt;</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stri_extract_all_regex</span>(<span class="st">"http.+pdf"</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.vector</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    httr2<span class="sc">::</span><span class="fu">request</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    httr2<span class="sc">::</span><span class="fu">req_perform</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    httr2<span class="sc">::</span><span class="fu">resp_body_raw</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pdf_text</span>());</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  .summary_labels <span class="ot">&lt;-</span> <span class="fu">invisible</span>({</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    .pattern <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Pkg"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>                  , <span class="st">"Intro"</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                  , <span class="st">"COD Status"</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                  , <span class="st">"FDA Application Number"</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                  , <span class="st">"FDA Therapeutic Equivalence Code"</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                  );</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    .replacement <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Package"</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>                  , <span class="st">"Intro.+Date"</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>                  , <span class="st">"Covered Outpatient Drug [(]COD[)] Status"</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>                  , <span class="st">"FDA Application Number/OTC Monograph Number"</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>                  , <span class="st">"TEC"</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>                  );</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(api_data) <span class="sc">|&gt;</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>      rlang<span class="sc">::</span><span class="fu">set_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">imap_chr</span>(\(x, y){</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        .out <span class="ot">&lt;-</span> api_dictionary <span class="sc">|&gt;</span> </span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stri_extract_all_regex</span>(</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>              <span class="fu">sprintf</span>(</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>                <span class="at">fmt =</span> <span class="st">"(%s)[:]</span><span class="sc">\n</span><span class="st">.+"</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>                , <span class="fu">stri_replace_all_fixed</span>(<span class="at">str =</span> x, <span class="at">pattern =</span> .pattern , <span class="at">replacement =</span> .replacement, <span class="at">vectorize_all =</span> <span class="cn">FALSE</span>) </span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>            , <span class="at">simplify =</span> <span class="cn">TRUE</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">|&gt;</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>            stats<span class="sc">::</span><span class="fu">na.omit</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.vector</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>);</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (rlang<span class="sc">::</span><span class="fu">is_empty</span>(.out)){ </span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>          y </span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> { </span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>          .out <span class="ot">&lt;-</span> <span class="fu">paste</span>(.out, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ifelse</span>(stringi<span class="sc">::</span><span class="fu">stri_length</span>(.out) <span class="sc">&gt;</span> <span class="dv">50</span>, <span class="fu">paste0</span>(<span class="fu">stri_sub</span>(.out, <span class="at">length =</span> <span class="dv">50</span>), <span class="st">" ..."</span>), .out)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  });</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iwalk</span>(.summary_labels, \(x, y){ </span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    api_data <span class="ot">&lt;&lt;-</span> <span class="fu">modify_at</span>(api_data, y, \(i){ <span class="fu">attr</span>(i, <span class="st">"label"</span>) <span class="ot">&lt;-</span> x; i }) </span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>  });</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cache_prep</span>(api_data) <span class="sc">|&gt;</span> <span class="fu">cache_save</span>(.cache);</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cache_prep</span>(api_dictionary) <span class="sc">|&gt;</span> <span class="fu">cache_save</span>(.cache)</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cache_load</span>(.cache, <span class="st">"global_api_dictionary"</span>);</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Retrieve the OpenFDA data</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="st">"global_openfda_ndc"</span> <span class="sc">%in%</span> .cache<span class="sc">$</span><span class="fu">keys</span>()){</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  json.file <span class="ot">&lt;-</span> <span class="fu">paste0</span>(params<span class="sc">$</span>data_dir, <span class="st">"/drug-ndc-0001-of-0001.json"</span>);</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  download.file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>();</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(json.file)){ </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">p</span>(<span class="fu">sprintf</span>(<span class="st">"Retrieve data from '%s'"</span>, urls<span class="sc">$</span>openFDA)) <span class="sc">|&gt;</span> <span class="fu">print</span>()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">GET</span>(urls<span class="sc">$</span>data<span class="sc">$</span>children <span class="sc">|&gt;</span> <span class="fu">stri_extract_first_regex</span>(<span class="st">"https.+json.zip"</span>),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">write_disk</span>(<span class="at">path =</span> download.file, <span class="at">overwrite =</span> <span class="cn">TRUE</span>));</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unzip</span>(<span class="at">zipfile =</span> download.file, <span class="at">exdir =</span> <span class="st">"data"</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  open_fda_ndc <span class="ot">&lt;-</span> { <span class="fu">read_json</span>(<span class="at">path =</span> json.file) <span class="sc">%$%</span> {</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(results, as.data.table) <span class="sc">|&gt;</span> <span class="fu">rbindlist</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">setattr</span>(<span class="st">"metadata"</span>, meta)}</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cache_prep</span>(openFDA_ndc) <span class="sc">|&gt;</span> <span class="fu">cache_save</span>(.cache);</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="st">"openFDA_ndc"</span> <span class="sc">%in%</span> <span class="fu">ls</span>()){ </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cache_load</span>(.cache, <span class="st">"global_openfda_ndc"</span>);</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>NDC sequences come in a various formats, usually a <code>4-4-x</code>, <code>5-4-x</code>, or <code>5-3-x</code> sequence (each integer indicating string length). Sometimes other formats arise, so normalizing all NDC sequences is a good idea, especially when there is a desire (or need) to join different data containing intersecting NDCs.</p>
<p>The following shows proportional representation of NDC formats in the <em>OpenFDA</em> and <em>MDRP</em> data, respectively:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>&lt;environment: R_GlobalEnv&gt;</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-69a07d18a0437d588027" style="width:100%;height:585px;" class="plotly html-widget "></div>
<script type="application/json" data-for="htmlwidget-69a07d18a0437d588027">{"x":{"data":[{"labels":["4-4","5-3","5-4"],"values":[12637,70802,42628],"hole":0.59999999999999998,"rotation":0,"textinfo":"label+percent","insidetextorientation":"radial","type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"xaxis":"x","yaxis":"y","frame":null},{"labels":["4-4","5-3","5-4"],"values":[12637,70802,42628],"hole":0.59999999999999998,"rotation":0,"textinfo":"label+percent","insidetextorientation":"radial","type":"scatter","x":[0.5],"y":[0.5],"text":"OpenFDA","mode":"text","xref":"paper","yref":"paper","font":{"family":"Georgia","size":22},"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"labels":["Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","5-4","2-4","3-3","5-2","3-4","5-3"],"values":[94923,94923,94923,94923,94923,94923,94923,94923,94923,94923,94923,58700,60652,84379,110388,254384,736280],"hole":0.59999999999999998,"rotation":33,"textinfo":"label+percent","insidetextorientation":"radial","type":"pie","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(255,255,255,1)"}},"xaxis":"x2","yaxis":"y2","frame":null},{"labels":["Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","Other<br><sup>11 formats<\/sup>","5-4","2-4","3-3","5-2","3-4","5-3"],"values":[94923,94923,94923,94923,94923,94923,94923,94923,94923,94923,94923,58700,60652,84379,110388,254384,736280],"hole":0.59999999999999998,"rotation":33,"textinfo":"label+percent","insidetextorientation":"radial","type":"scatter","x":[0.5],"y":[0.5],"text":"MDRP","mode":"text","xref":"paper","yref":"paper","font":{"family":"Georgia","size":22},"marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"line":{"color":"rgba(214,39,40,1)"},"xaxis":"x2","yaxis":"y2","frame":null}],"layout":{"xaxis":{"domain":[0,0.47999999999999998],"automargin":true,"showgrid":false,"zeroline":false,"showticklabels":false,"anchor":"y"},"xaxis2":{"domain":[0.52000000000000002,1],"automargin":true,"showgrid":false,"zeroline":false,"showticklabels":false,"anchor":"y2"},"yaxis2":{"domain":[0,1],"automargin":true,"showgrid":false,"zeroline":false,"showticklabels":false,"anchor":"x2"},"yaxis":{"domain":[0,1],"automargin":true,"showgrid":false,"zeroline":false,"showticklabels":false,"anchor":"x"},"annotations":[],"shapes":[],"images":[],"width":500,"height":450,"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":true},"attrs":{"37f03b5f3a39":{"labels":{},"values":{},"hole":0.59999999999999998,"rotation":0,"textinfo":"label+percent","insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"},"37f03b5f3a39.1":{"labels":{},"values":{},"hole":0.59999999999999998,"rotation":0,"textinfo":"label+percent","insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","x":0.5,"y":0.5,"text":"OpenFDA","mode":"text","xref":"paper","yref":"paper","font":{"family":"Georgia","size":22},"inherit":true},"37f032097cf3":{"labels":{},"values":{},"hole":0.59999999999999998,"rotation":33,"textinfo":"label+percent","insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"},"37f032097cf3.1":{"labels":{},"values":{},"hole":0.59999999999999998,"rotation":33,"textinfo":"label+percent","insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","x":0.5,"y":0.5,"text":"MDRP","mode":"text","xref":"paper","yref":"paper","font":{"family":"Georgia","size":22},"inherit":true}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The MDRP has many more NDC sequences due to truncation of leading zeroes. Fortunately, an NDC sequence is a collection of code segments (present in the data) concatenated with a hyphen. Knowing this, A function (<code>check_ndc_format()</code> — see <a href=".\setup.R" target="_blank">setup.R</a> was created in order to derive conformed NDC segment sequences (using labeler and product codes) based on the OpenFDA sequences, allowing the MDRP and OpenFDA data to be joined later in the process.</p>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Event Metrics</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Drug Events<br>Creation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Drug Events<br>Visualization</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p><code>master_drug_data</code> is a great data set for constructing simple, time-based metrics. Given the natural order of the types of events, it is easy to setup event sequence metrics using package <a href="https://rdocumentation.org/packages/lubridate/versions/1.9.2"><code>lubridate</code></a>. The metrics to be created are described below:</p>
<div class="cell">
<div class="cell-output-display">
<p>

</p><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="background-color: #EEEEEE; padding: 2px">Metric Name</td>
<td data-quarto-table-cell-role="th" style="background-color: #EEEEEE; padding-left: 5px">Description</td>
</tr>
<tr class="even">
<td style="text-align: right; font-weight: bold; padding: 2px;">days_to_market</td>
<td style="padding-left: 5px">Days between approval and market release</td>
</tr>
<tr class="odd">
<td style="text-align: right; font-weight: bold; padding: 2px;">on_market_age</td>
<td style="padding-left: 5px">Days active on market</td>
</tr>
<tr class="even">
<td style="text-align: right; font-weight: bold; padding: 2px;">days_market_absent</td>
<td style="padding-left: 5px">Days most-recently absent from market</td>
</tr>
</tbody>
</table>

<p></p>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>My next task was to add the date-differential metrics mentioned in the previous subsection. As an intermediate object, I created <code>ndc_events</code> by looking at what appears to the be natural chronology of dates: <code>fda_approval_date</code> -&gt; <code>market_date</code> -&gt; <code>termination_date</code> -&gt; <code>reactivation_date</code>.</p>
<p>Some of the values in columns <code>termination_date</code> and <code>reactivation_date</code> are <code>NA</code> indicating the event did not happen. This would obviously need to be addressed in deriving the metrics logic, and after several rounds of trial-and-error, I worked out such logic, discovering the following in the process:</p>
<ul>
<li>The metrics are hierarchically-contingent based on whether or not <code>NA</code> values exist and if so, which of <code>termination_date</code>, <code>reactivation_date</code>, or both</li>
<li>Some values in <code>termination_date</code> and <code>reactivation_date</code> are future-dated relative to “today”: these were converted to <code>NA</code> before deriving the metrics as they haven’t happened yet (<code>NA</code> <span class="math inline">\(\equiv\)</span> Didn’t happen (<em>yet</em>))</li>
<li>A small subset of observations having the FDA approval date <strong>after</strong> the listed market date</li>
</ul>
<p>The resulting object was captured in <code>ndc_events_clean</code>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ndc_events_clean <span class="ot">&lt;-</span> { </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">define</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    ndc_events</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    , <span class="fu">modify_at</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        .SD, <span class="st">"termination_date"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        , \(x) <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="fu">today</span>() <span class="sc">+</span> <span class="fu">weeks</span>(<span class="dv">24</span>), <span class="fu">ifelse</span>(<span class="fu">today</span>() <span class="sc">&lt;</span> x, <span class="fu">today</span>() <span class="sc">+</span> <span class="fu">weeks</span>(<span class="dv">24</span>), x))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    , <span class="fu">modify_at</span>(</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        .SD, <span class="st">"reactivation_date"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        , \(x) <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), termination_date, <span class="fu">ifelse</span>(x <span class="sc">&gt;</span> <span class="fu">today</span>(), <span class="fu">today</span>() <span class="sc">+</span> <span class="fu">weeks</span>(<span class="dv">24</span>), x))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    , <span class="fu">cbind</span>(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        .SD</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        , <span class="fu">define</span>({</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            .SD[, fda_approval_date<span class="sc">:</span>reactivation_date][, <span class="fu">map</span>(.SD, as.numeric)] <span class="sc">|&gt;</span> </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>              <span class="co"># dplyr::slice_sample(prop = 0.4) |&gt;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>              <span class="fu">apply</span>(<span class="dv">1</span>, \(x){</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                <span class="fu">c</span>(x, <span class="fu">diff</span>(x) <span class="sc">|&gt;</span> <span class="fu">modify_if</span>(is.na, \(i) <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">sign</span>() <span class="sc">%&gt;%</span> .[<span class="sc">-</span><span class="dv">1</span>]) <span class="sc">|&gt;</span> </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">as.list</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">modify_at</span>(<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>), \(i) i <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                  rlang<span class="sc">::</span><span class="fu">set_names</span>(<span class="fu">names</span>(.)[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)], <span class="fu">paste0</span>(<span class="fu">names</span>(.)[<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>)], <span class="st">".bool"</span>))</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>                }, <span class="at">simplify =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>              <span class="fu">rbindlist</span>()</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>          , <span class="at">days_to_market =</span> market_date <span class="sc">-</span> fda_approval_date</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>          , <span class="at">on_market_age =</span> </span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>              <span class="fu">apply</span>(.SD[, .(termination_date.bool, reactivation_date.bool, termination_date)]</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>                    , <span class="dv">1</span>, <span class="cf">function</span>(i){ <span class="fu">ifelse</span>(i[[<span class="dv">1</span>]], <span class="fu">ifelse</span>(i[[<span class="dv">2</span>]], <span class="fu">today</span>(), i[[<span class="dv">3</span>]]), <span class="fu">today</span>()) </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>                    }) <span class="sc">-</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>              <span class="fu">apply</span>(.SD[, .(termination_date.bool, reactivation_date.bool</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>                            , market_date, reactivation_date)]</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>                    , <span class="dv">1</span>, <span class="cf">function</span>(i){ <span class="fu">ifelse</span>(i[[<span class="dv">1</span>]], <span class="fu">ifelse</span>(i[[<span class="dv">2</span>]], i[[<span class="dv">4</span>]], i[[<span class="dv">3</span>]]), i[[<span class="dv">3</span>]]) </span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>                    })</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>          , <span class="at">days_market_absent =</span> </span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>                <span class="fu">apply</span>(.SD[, .(reactivation_date.bool, reactivation_date)]</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>                    , <span class="dv">1</span>, <span class="cf">function</span>(i){ <span class="fu">ifelse</span>(i[[<span class="dv">1</span>]], i[[<span class="dv">2</span>]], <span class="fu">today</span>()) </span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>                    }) <span class="sc">-</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>                <span class="fu">apply</span>(.SD[, .(termination_date.bool, termination_date)]</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>                    , <span class="dv">1</span>, <span class="cf">function</span>(i){ <span class="fu">ifelse</span>(i[[<span class="dv">1</span>]], i[[<span class="dv">2</span>]], <span class="fu">today</span>()) </span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>                    })</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>          , <span class="sc">~</span>days_to_market <span class="sc">+</span> on_market_age <span class="sc">+</span> days_market_absent</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    , <span class="fu">modify_at</span>(.SD, <span class="fu">c</span>(<span class="st">"termination_date"</span>, <span class="st">"reactivation_date"</span>), \(x) <span class="fu">as.Date</span>(x, <span class="at">origin =</span> <span class="st">"1970-01-01"</span>))</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>  )}</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>(\(x, i, by){</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="fu">define</span>(x[i, <span class="at">on =</span> by, <span class="at">allow.cartesian =</span> <span class="cn">TRUE</span>]);</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">imap</span>(.ndc_events_meta, \(x, y){</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    rlang<span class="sc">::</span><span class="fu">inject</span>(<span class="fu">descr</span>(</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">modify_at</span>(i, y, \(j) <span class="fu">as.numeric</span>(j, <span class="at">units =</span> <span class="st">"days"</span>))</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>      , <span class="at">var =</span> <span class="sc">!!</span>rlang<span class="sc">::</span><span class="fu">sym</span>(y)</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>      , <span class="at">transpose =</span> <span class="sc">!</span><span class="cn">TRUE</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>      )) <span class="sc">|&gt;</span> </span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">view</span>(<span class="at">method =</span> <span class="st">"render"</span>, <span class="at">table.classes =</span> <span class="st">'multi_stat'</span>, <span class="at">custom.css =</span> <span class="st">"markdown.css"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">td</span>()</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>    });</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>  })(master_drug_data</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>     , ndc_events_clean</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>     , { <span class="fu">c</span>(<span class="st">"alt_ndc"</span>, <span class="st">"fda_application_number"</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>       , <span class="st">"market_date"</span>, <span class="st">"termination_date"</span></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>       , <span class="st">"reactivation_date"</span>, <span class="st">"fda_approval_date"</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>       )}) <span class="sc">|&gt;</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>  tags<span class="sc">$</span><span class="fu">tr</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>  tags<span class="sc">$</span><span class="fu">table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td><div class="container st-container">
<h3 id="descriptive-statistics" class="anchored">Descriptive Statistics</h3>
<h4 id="days_to_market" class="anchored">days_to_market</h4>
<strong>N</strong>: 93692<br>

<table class="table table-bordered table-striped st-table st-table-bordered st-table-striped st-descr-table multi_stat table-sm small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th class="st-protect-top-border" style="text-align: center;" data-quarto-table-cell-role="th">days_to_<br>
market</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Mean</strong></td>
<td><span>887.11</span></td>
</tr>
<tr class="even">
<td><strong>Std.Dev</strong></td>
<td><span>1998.58</span></td>
</tr>
<tr class="odd">
<td><strong>Min</strong></td>
<td><span>-9859.00</span></td>
</tr>
<tr class="even">
<td><strong>Q1</strong></td>
<td><span>0.00</span></td>
</tr>
<tr class="odd">
<td><strong>Median</strong></td>
<td><span>72.00</span></td>
</tr>
<tr class="even">
<td><strong>Q3</strong></td>
<td><span>494.00</span></td>
</tr>
<tr class="odd">
<td><strong>Max</strong></td>
<td><span>11870.00</span></td>
</tr>
<tr class="even">
<td><strong>MAD</strong></td>
<td><span>106.75</span></td>
</tr>
<tr class="odd">
<td><strong>IQR</strong></td>
<td><span>494.00</span></td>
</tr>
<tr class="even">
<td><strong>CV</strong></td>
<td><span>2.25</span></td>
</tr>
<tr class="odd">
<td><strong>Skewness</strong></td>
<td><span>2.74</span></td>
</tr>
<tr class="even">
<td><strong>SE.Skewness</strong></td>
<td><span>0.01</span></td>
</tr>
<tr class="odd">
<td><strong>Kurtosis</strong></td>
<td><span>8.08</span></td>
</tr>
<tr class="even">
<td><strong>N.Valid</strong></td>
<td><span>93692</span></td>
</tr>
<tr class="odd">
<td><strong>Pct.Valid</strong></td>
<td><span>100.00</span></td>
</tr>
</tbody>
</table>
<p>Generated by <a href="https://github.com/dcomtois/summarytools">summarytools</a> 1.0.1 (<a href="https://www.r-project.org/">R</a> version 4.3.2)<br>
2023-11-23</p>
</div></td>
<td><div class="container st-container">
<h3 id="descriptive-statistics-1" class="anchored">Descriptive Statistics</h3>
<h4 id="on_market_age" class="anchored">on_market_age</h4>
<strong>N</strong>: 93692<br>

<table class="table table-bordered table-striped st-table st-table-bordered st-table-striped st-descr-table multi_stat table-sm small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th class="st-protect-top-border" style="text-align: center;" data-quarto-table-cell-role="th">on_market_<br>
age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Mean</strong></td>
<td><span>4875.69</span></td>
</tr>
<tr class="even">
<td><strong>Std.Dev</strong></td>
<td><span>3306.68</span></td>
</tr>
<tr class="odd">
<td><strong>Min</strong></td>
<td><span>1.00</span></td>
</tr>
<tr class="even">
<td><strong>Q1</strong></td>
<td><span>2325.00</span></td>
</tr>
<tr class="odd">
<td><strong>Median</strong></td>
<td><span>3983.00</span></td>
</tr>
<tr class="even">
<td><strong>Q3</strong></td>
<td><span>6751.00</span></td>
</tr>
<tr class="odd">
<td><strong>Max</strong></td>
<td><span>12275.00</span></td>
</tr>
<tr class="even">
<td><strong>MAD</strong></td>
<td><span>2944.44</span></td>
</tr>
<tr class="odd">
<td><strong>IQR</strong></td>
<td><span>4426.00</span></td>
</tr>
<tr class="even">
<td><strong>CV</strong></td>
<td><span>0.68</span></td>
</tr>
<tr class="odd">
<td><strong>Skewness</strong></td>
<td><span>0.84</span></td>
</tr>
<tr class="even">
<td><strong>SE.Skewness</strong></td>
<td><span>0.01</span></td>
</tr>
<tr class="odd">
<td><strong>Kurtosis</strong></td>
<td><span>-0.29</span></td>
</tr>
<tr class="even">
<td><strong>N.Valid</strong></td>
<td><span>93692</span></td>
</tr>
<tr class="odd">
<td><strong>Pct.Valid</strong></td>
<td><span>100.00</span></td>
</tr>
</tbody>
</table>
<p>Generated by <a href="https://github.com/dcomtois/summarytools">summarytools</a> 1.0.1 (<a href="https://www.r-project.org/">R</a> version 4.3.2)<br>
2023-11-23</p>
</div></td>
<td><div class="container st-container">
<h3 id="descriptive-statistics-2" class="anchored">Descriptive Statistics</h3>
<h4 id="days_market_absent" class="anchored">days_market_absent</h4>
<strong>N</strong>: 93692<br>

<table class="table table-bordered table-striped st-table st-table-bordered st-table-striped st-descr-table multi_stat table-sm small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th class="st-protect-top-border" style="text-align: center;" data-quarto-table-cell-role="th">days_market_<br>
absent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Mean</strong></td>
<td><span>394.53</span></td>
</tr>
<tr class="even">
<td><strong>Std.Dev</strong></td>
<td><span>1113.01</span></td>
</tr>
<tr class="odd">
<td><strong>Min</strong></td>
<td><span>-3179.00</span></td>
</tr>
<tr class="even">
<td><strong>Q1</strong></td>
<td><span>-168.00</span></td>
</tr>
<tr class="odd">
<td><strong>Median</strong></td>
<td><span>-168.00</span></td>
</tr>
<tr class="even">
<td><strong>Q3</strong></td>
<td><span>309.50</span></td>
</tr>
<tr class="odd">
<td><strong>Max</strong></td>
<td><span>11284.00</span></td>
</tr>
<tr class="even">
<td><strong>MAD</strong></td>
<td><span>0.00</span></td>
</tr>
<tr class="odd">
<td><strong>IQR</strong></td>
<td><span>477.25</span></td>
</tr>
<tr class="even">
<td><strong>CV</strong></td>
<td><span>2.82</span></td>
</tr>
<tr class="odd">
<td><strong>Skewness</strong></td>
<td><span>2.13</span></td>
</tr>
<tr class="even">
<td><strong>SE.Skewness</strong></td>
<td><span>0.01</span></td>
</tr>
<tr class="odd">
<td><strong>Kurtosis</strong></td>
<td><span>4.96</span></td>
</tr>
<tr class="even">
<td><strong>N.Valid</strong></td>
<td><span>93692</span></td>
</tr>
<tr class="odd">
<td><strong>Pct.Valid</strong></td>
<td><span>100.00</span></td>
</tr>
</tbody>
</table>
<p>Generated by <a href="https://github.com/dcomtois/summarytools">summarytools</a> 1.0.1 (<a href="https://www.r-project.org/">R</a> version 4.3.2)<br>
2023-11-23</p>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Some of the ‘Max’/‘Min’ values are negative; however, the number of records is relatively small and, more importantly, explainable:</p>
<ul>
<li><code>days_to_market</code>: Approval occurred after the market date</li>
<li><code>days_market_absent</code>: Records where the termination date was non-<code>NA</code> but after the market date</li>
</ul>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>Combining the master drug data and event data (<code>master_drug_data</code> + <code>ndc_events_clean</code>), after some trial-and-error, I settled on the following showing the root-mean-square of metric values grouped by route of administration:</p>
<div class="cell">
<div class="cell-output-display">
<p>
</p><div id="htmlwidget-6c02684e4881bc109796" style="width:100%;height:473px;" class="plotly html-widget "></div>
<script type="application/json" data-for="htmlwidget-6c02684e4881bc109796">{"x":{"visdat":{"37f063e552f1":["function () ","plotlyVisDat"]},"cur_data":"37f063e552f1","attrs":{"37f063e552f1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[1.76371597363618,2.3440237692395356,2.3069988163171598],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>AURICULAR (OTIC)<\/b><br>1.10 Years","<b>AURICULAR (OTIC)<\/b><br>7.95 Years","<b>AURICULAR (OTIC)<\/b><br>7.01 Years"],"name":"AURICULAR (OTIC)","mode":"markers","inherit":true},"37f063e552f1.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.6014223689002929,2.2396543049126421,2.3688127189210721],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>BUCCAL<\/b><br>19.07 Years","<b>BUCCAL<\/b><br>5.57 Years","<b>BUCCAL<\/b><br>8.64 Years"],"name":"BUCCAL","mode":"markers","inherit":true},"37f063e552f1.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0.40759009418101233,2.6826545622188447,1.8145670200401078],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>CUTANEOUS<\/b><br>4.00 Days","<b>CUTANEOUS<\/b><br>25.14 Years","<b>CUTANEOUS<\/b><br>1.31 Years"],"name":"CUTANEOUS","mode":"markers","inherit":true},"37f063e552f1.3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0,2.574449262808618,2.4134924041979788],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>DENTAL<\/b><br>0.00 Days","<b>DENTAL<\/b><br>17.40 Years","<b>DENTAL<\/b><br>10.06 Years"],"name":"DENTAL","mode":"markers","inherit":true},"37f063e552f1.4":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.1127039592302985,2.6561081723047004,2.3061566468877639],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>EPIDURAL<\/b><br>3.62 Years","<b>EPIDURAL<\/b><br>22.97 Years","<b>EPIDURAL<\/b><br>6.99 Years"],"name":"EPIDURAL","mode":"markers","inherit":true},"37f063e552f1.5":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0.89275617630072546,2.6414983394356537,2.342306809940252],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INFILTRATION<\/b><br>20.83 Days","<b>INFILTRATION<\/b><br>21.85 Years","<b>INFILTRATION<\/b><br>7.90 Years"],"name":"INFILTRATION","mode":"markers","inherit":true},"37f063e552f1.6":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[1.9918466981534697,2.4016386854569163,2.134393678384205],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRA-ARTERIAL<\/b><br>2.40 Years","<b>INTRA-ARTERIAL<\/b><br>9.67 Years","<b>INTRA-ARTERIAL<\/b><br>3.89 Years"],"name":"INTRA-ARTERIAL","mode":"markers","inherit":true},"37f063e552f1.7":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.6193613521008339,2.3008227226396598,2.291781017860123],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRA-ARTICULAR<\/b><br>20.27 Years","<b>INTRA-ARTICULAR<\/b><br>6.86 Years","<b>INTRA-ARTICULAR<\/b><br>6.65 Years"],"name":"INTRA-ARTICULAR","mode":"markers","inherit":true},"37f063e552f1.8":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0,2.5632658007540212,2.3129273024702508],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRABRONCHIAL<\/b><br>0.00 Days","<b>INTRABRONCHIAL<\/b><br>16.75 Years","<b>INTRABRONCHIAL<\/b><br>7.15 Years"],"name":"INTRABRONCHIAL","mode":"markers","inherit":true},"37f063e552f1.9":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0,2.7583725479110153,1.6064436114423479],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRACARDIAC<\/b><br>0.00 Days","<b>INTRACARDIAC<\/b><br>32.52 Years","<b>INTRACARDIAC<\/b><br>236.00 Days"],"name":"INTRACARDIAC","mode":"markers","inherit":true},"37f063e552f1.10":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0,2.6751090422062953,2.381145033701122],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRACAUDAL<\/b><br>0.00 Days","<b>INTRACAUDAL<\/b><br>24.50 Years","<b>INTRACAUDAL<\/b><br>9.01 Years"],"name":"INTRACAUDAL","mode":"markers","inherit":true},"37f063e552f1.11":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.1897278780187635,2.5387576519564585,2.3162044620804321],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRAMUSCULAR<\/b><br>4.70 Years","<b>INTRAMUSCULAR<\/b><br>15.41 Years","<b>INTRAMUSCULAR<\/b><br>7.23 Years"],"name":"INTRAMUSCULAR","mode":"markers","inherit":true},"37f063e552f1.12":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0.77592007563099985,2.235213215397263,1.9083642629792068],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRASPINAL<\/b><br>14.00 Days","<b>INTRASPINAL<\/b><br>5.49 Years","<b>INTRASPINAL<\/b><br>1.81 Years"],"name":"INTRASPINAL","mode":"markers","inherit":true},"37f063e552f1.13":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[1.3451544880700737,2.2161481071970126,2.0560651189705021],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRATHECAL<\/b><br>97.04 Days","<b>INTRATHECAL<\/b><br>5.14 Years","<b>INTRATHECAL<\/b><br>2.98 Years"],"name":"INTRATHECAL","mode":"markers","inherit":true},"37f063e552f1.14":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.4946733864040436,2.4851683243952074,2.3094129220046997],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRAUTERINE<\/b><br>13.26 Years","<b>INTRAUTERINE<\/b><br>12.84 Years","<b>INTRAUTERINE<\/b><br>7.06 Years"],"name":"INTRAUTERINE","mode":"markers","inherit":true},"37f063e552f1.15":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.5266936402785869,2.3026677011718726,2.2816456544273129],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRAVASCULAR<\/b><br>14.79 Years","<b>INTRAVASCULAR<\/b><br>6.90 Years","<b>INTRAVASCULAR<\/b><br>6.43 Years"],"name":"INTRAVASCULAR","mode":"markers","inherit":true},"37f063e552f1.16":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.2817780579721814,2.5055969124571646,2.2435836762327357],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRAVENOUS<\/b><br>6.43 Years","<b>INTRAVENOUS<\/b><br>13.77 Years","<b>INTRAVENOUS<\/b><br>5.65 Years"],"name":"INTRAVENOUS","mode":"markers","inherit":true},"37f063e552f1.17":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0.30569257063575933,2.4358405453058851,2.1756009300321777],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>INTRAVITREAL<\/b><br>2.83 Days","<b>INTRAVITREAL<\/b><br>10.86 Years","<b>INTRAVITREAL<\/b><br>4.48 Years"],"name":"INTRAVITREAL","mode":"markers","inherit":true},"37f063e552f1.18":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0,2.7416523554810124,1.9992355756915527],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>IRRIGATION<\/b><br>0.00 Days","<b>IRRIGATION<\/b><br>30.72 Years","<b>IRRIGATION<\/b><br>2.46 Years"],"name":"IRRIGATION","mode":"markers","inherit":true},"37f063e552f1.19":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.1365126115463857,2.5826105016406604,2.3068908667153187],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>NASAL<\/b><br>3.92 Years","<b>NASAL<\/b><br>17.89 Years","<b>NASAL<\/b><br>7.00 Years"],"name":"NASAL","mode":"markers","inherit":true},"37f063e552f1.20":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.428741191062842,2.5764252422429004,2.249208231302255],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>OPHTHALMIC<\/b><br>10.60 Years","<b>OPHTHALMIC<\/b><br>17.51 Years","<b>OPHTHALMIC<\/b><br>5.76 Years"],"name":"OPHTHALMIC","mode":"markers","inherit":true},"37f063e552f1.21":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.2171925441435976,2.447600196396484,2.325228499422928],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>ORAL<\/b><br>5.16 Years","<b>ORAL<\/b><br>11.30 Years","<b>ORAL<\/b><br>7.45 Years"],"name":"ORAL","mode":"markers","inherit":true},"37f063e552f1.22":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0,2.7507445140234701,1.8498100620328153],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>OROPHARYNGEAL<\/b><br>0.00 Days","<b>OROPHARYNGEAL<\/b><br>31.69 Years","<b>OROPHARYNGEAL<\/b><br>1.48 Years"],"name":"OROPHARYNGEAL","mode":"markers","inherit":true},"37f063e552f1.23":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.5601151885047555,2.5964825103517857,2.2934550064843671],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>PARENTERAL<\/b><br>16.57 Years","<b>PARENTERAL<\/b><br>18.75 Years","<b>PARENTERAL<\/b><br>6.69 Years"],"name":"PARENTERAL","mode":"markers","inherit":true},"37f063e552f1.24":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[0,2.6754049062440091,2.3745183271595858],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>PERINEURAL<\/b><br>0.00 Days","<b>PERINEURAL<\/b><br>24.52 Years","<b>PERINEURAL<\/b><br>8.81 Years"],"name":"PERINEURAL","mode":"markers","inherit":true},"37f063e552f1.25":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[1.9368589220215864,2.5258207203329541,2.216888414605608],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>RECTAL<\/b><br>1.99 Years","<b>RECTAL<\/b><br>14.75 Years","<b>RECTAL<\/b><br>5.16 Years"],"name":"RECTAL","mode":"markers","inherit":true},"37f063e552f1.26":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.2969481479851148,2.5028455142289183,2.3246047187978309],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>RESPIRATORY (INHALATION)<\/b><br>6.77 Years","<b>RESPIRATORY (INHALATION)<\/b><br>13.64 Years","<b>RESPIRATORY (INHALATION)<\/b><br>7.44 Years"],"name":"RESPIRATORY (INHALATION)","mode":"markers","inherit":true},"37f063e552f1.27":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.1146023446477442,2.502113359481593,2.1928259238902528],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>SUBCUTANEOUS<\/b><br>3.64 Years","<b>SUBCUTANEOUS<\/b><br>13.60 Years","<b>SUBCUTANEOUS<\/b><br>4.75 Years"],"name":"SUBCUTANEOUS","mode":"markers","inherit":true},"37f063e552f1.28":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[1.3367444741087955,2.314534775089371,2.1578623274471891],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>SUBLINGUAL<\/b><br>94.30 Days","<b>SUBLINGUAL<\/b><br>7.19 Years","<b>SUBLINGUAL<\/b><br>4.22 Years"],"name":"SUBLINGUAL","mode":"markers","inherit":true},"37f063e552f1.29":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.2671681098061014,2.5343268347142756,2.3138760200146011],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>TOPICAL<\/b><br>6.12 Years","<b>TOPICAL<\/b><br>15.18 Years","<b>TOPICAL<\/b><br>7.17 Years"],"name":"TOPICAL","mode":"markers","inherit":true},"37f063e552f1.30":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.1777049422667187,2.6046983578926532,2.1729179144736945],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>TRANSDERMAL<\/b><br>4.51 Years","<b>TRANSDERMAL<\/b><br>19.28 Years","<b>TRANSDERMAL<\/b><br>4.44 Years"],"name":"TRANSDERMAL","mode":"markers","inherit":true},"37f063e552f1.31":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[1.6502686473357955,2.4497872898574915,2.6191315522006358],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>VAGINAL<\/b><br>273.93 Days","<b>VAGINAL<\/b><br>11.39 Years","<b>VAGINAL<\/b><br>20.25 Years"],"name":"VAGINAL","mode":"markers","inherit":true},"37f063e552f1.32":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatterpolar","fill":"toself","r":[2.2349685552052447,2.5328945623235626,2.286579143157045],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":"text","hovertext":["<b>~<\/b><br>5.48 Years","<b>~<\/b><br>15.10 Years","<b>~<\/b><br>6.54 Years"],"name":"~","mode":"markers","inherit":true}},"layout":{"width":960,"height":700,"margin":{"b":40,"l":60,"t":-0.5,"r":10},"title":{"text":"Metrics Radar by Route of Administration (Log<sub>30<\/sub> Days)<br><span style='font-size:smaller; '>(Double- or single-click legend items)","legend":{"font":{"size":10}},"font":{"family":"Georgia"}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"fillcolor":"rgba(31,119,180,0.5)","type":"scatterpolar","fill":"toself","r":[1.76371597363618,2.3440237692395356,2.3069988163171598],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>AURICULAR (OTIC)<\/b><br>1.10 Years","<b>AURICULAR (OTIC)<\/b><br>7.95 Years","<b>AURICULAR (OTIC)<\/b><br>7.01 Years"],"name":"AURICULAR (OTIC)","mode":"markers","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"line":{"color":"rgba(31,119,180,1)"},"frame":null},{"fillcolor":"rgba(255,127,14,0.5)","type":"scatterpolar","fill":"toself","r":[2.6014223689002929,2.2396543049126421,2.3688127189210721],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>BUCCAL<\/b><br>19.07 Years","<b>BUCCAL<\/b><br>5.57 Years","<b>BUCCAL<\/b><br>8.64 Years"],"name":"BUCCAL","mode":"markers","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"line":{"color":"rgba(255,127,14,1)"},"frame":null},{"fillcolor":"rgba(44,160,44,0.5)","type":"scatterpolar","fill":"toself","r":[0.40759009418101233,2.6826545622188447,1.8145670200401078],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>CUTANEOUS<\/b><br>4.00 Days","<b>CUTANEOUS<\/b><br>25.14 Years","<b>CUTANEOUS<\/b><br>1.31 Years"],"name":"CUTANEOUS","mode":"markers","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"line":{"color":"rgba(44,160,44,1)"},"frame":null},{"fillcolor":"rgba(214,39,40,0.5)","type":"scatterpolar","fill":"toself","r":[0,2.574449262808618,2.4134924041979788],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>DENTAL<\/b><br>0.00 Days","<b>DENTAL<\/b><br>17.40 Years","<b>DENTAL<\/b><br>10.06 Years"],"name":"DENTAL","mode":"markers","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"line":{"color":"rgba(214,39,40,1)"},"frame":null},{"fillcolor":"rgba(148,103,189,0.5)","type":"scatterpolar","fill":"toself","r":[2.1127039592302985,2.6561081723047004,2.3061566468877639],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>EPIDURAL<\/b><br>3.62 Years","<b>EPIDURAL<\/b><br>22.97 Years","<b>EPIDURAL<\/b><br>6.99 Years"],"name":"EPIDURAL","mode":"markers","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"line":{"color":"rgba(148,103,189,1)"},"frame":null},{"fillcolor":"rgba(140,86,75,0.5)","type":"scatterpolar","fill":"toself","r":[0.89275617630072546,2.6414983394356537,2.342306809940252],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INFILTRATION<\/b><br>20.83 Days","<b>INFILTRATION<\/b><br>21.85 Years","<b>INFILTRATION<\/b><br>7.90 Years"],"name":"INFILTRATION","mode":"markers","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"line":{"color":"rgba(140,86,75,1)"},"frame":null},{"fillcolor":"rgba(227,119,194,0.5)","type":"scatterpolar","fill":"toself","r":[1.9918466981534697,2.4016386854569163,2.134393678384205],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRA-ARTERIAL<\/b><br>2.40 Years","<b>INTRA-ARTERIAL<\/b><br>9.67 Years","<b>INTRA-ARTERIAL<\/b><br>3.89 Years"],"name":"INTRA-ARTERIAL","mode":"markers","marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"line":{"color":"rgba(227,119,194,1)"},"frame":null},{"fillcolor":"rgba(127,127,127,0.5)","type":"scatterpolar","fill":"toself","r":[2.6193613521008339,2.3008227226396598,2.291781017860123],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRA-ARTICULAR<\/b><br>20.27 Years","<b>INTRA-ARTICULAR<\/b><br>6.86 Years","<b>INTRA-ARTICULAR<\/b><br>6.65 Years"],"name":"INTRA-ARTICULAR","mode":"markers","marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"line":{"color":"rgba(127,127,127,1)"},"frame":null},{"fillcolor":"rgba(188,189,34,0.5)","type":"scatterpolar","fill":"toself","r":[0,2.5632658007540212,2.3129273024702508],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRABRONCHIAL<\/b><br>0.00 Days","<b>INTRABRONCHIAL<\/b><br>16.75 Years","<b>INTRABRONCHIAL<\/b><br>7.15 Years"],"name":"INTRABRONCHIAL","mode":"markers","marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"line":{"color":"rgba(188,189,34,1)"},"frame":null},{"fillcolor":"rgba(23,190,207,0.5)","type":"scatterpolar","fill":"toself","r":[0,2.7583725479110153,1.6064436114423479],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRACARDIAC<\/b><br>0.00 Days","<b>INTRACARDIAC<\/b><br>32.52 Years","<b>INTRACARDIAC<\/b><br>236.00 Days"],"name":"INTRACARDIAC","mode":"markers","marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"line":{"color":"rgba(23,190,207,1)"},"frame":null},{"fillcolor":"rgba(31,119,180,0.5)","type":"scatterpolar","fill":"toself","r":[0,2.6751090422062953,2.381145033701122],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRACAUDAL<\/b><br>0.00 Days","<b>INTRACAUDAL<\/b><br>24.50 Years","<b>INTRACAUDAL<\/b><br>9.01 Years"],"name":"INTRACAUDAL","mode":"markers","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"line":{"color":"rgba(31,119,180,1)"},"frame":null},{"fillcolor":"rgba(255,127,14,0.5)","type":"scatterpolar","fill":"toself","r":[2.1897278780187635,2.5387576519564585,2.3162044620804321],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRAMUSCULAR<\/b><br>4.70 Years","<b>INTRAMUSCULAR<\/b><br>15.41 Years","<b>INTRAMUSCULAR<\/b><br>7.23 Years"],"name":"INTRAMUSCULAR","mode":"markers","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"line":{"color":"rgba(255,127,14,1)"},"frame":null},{"fillcolor":"rgba(44,160,44,0.5)","type":"scatterpolar","fill":"toself","r":[0.77592007563099985,2.235213215397263,1.9083642629792068],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRASPINAL<\/b><br>14.00 Days","<b>INTRASPINAL<\/b><br>5.49 Years","<b>INTRASPINAL<\/b><br>1.81 Years"],"name":"INTRASPINAL","mode":"markers","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"line":{"color":"rgba(44,160,44,1)"},"frame":null},{"fillcolor":"rgba(214,39,40,0.5)","type":"scatterpolar","fill":"toself","r":[1.3451544880700737,2.2161481071970126,2.0560651189705021],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRATHECAL<\/b><br>97.04 Days","<b>INTRATHECAL<\/b><br>5.14 Years","<b>INTRATHECAL<\/b><br>2.98 Years"],"name":"INTRATHECAL","mode":"markers","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"line":{"color":"rgba(214,39,40,1)"},"frame":null},{"fillcolor":"rgba(148,103,189,0.5)","type":"scatterpolar","fill":"toself","r":[2.4946733864040436,2.4851683243952074,2.3094129220046997],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRAUTERINE<\/b><br>13.26 Years","<b>INTRAUTERINE<\/b><br>12.84 Years","<b>INTRAUTERINE<\/b><br>7.06 Years"],"name":"INTRAUTERINE","mode":"markers","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"line":{"color":"rgba(148,103,189,1)"},"frame":null},{"fillcolor":"rgba(140,86,75,0.5)","type":"scatterpolar","fill":"toself","r":[2.5266936402785869,2.3026677011718726,2.2816456544273129],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRAVASCULAR<\/b><br>14.79 Years","<b>INTRAVASCULAR<\/b><br>6.90 Years","<b>INTRAVASCULAR<\/b><br>6.43 Years"],"name":"INTRAVASCULAR","mode":"markers","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"line":{"color":"rgba(140,86,75,1)"},"frame":null},{"fillcolor":"rgba(227,119,194,0.5)","type":"scatterpolar","fill":"toself","r":[2.2817780579721814,2.5055969124571646,2.2435836762327357],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRAVENOUS<\/b><br>6.43 Years","<b>INTRAVENOUS<\/b><br>13.77 Years","<b>INTRAVENOUS<\/b><br>5.65 Years"],"name":"INTRAVENOUS","mode":"markers","marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"line":{"color":"rgba(227,119,194,1)"},"frame":null},{"fillcolor":"rgba(127,127,127,0.5)","type":"scatterpolar","fill":"toself","r":[0.30569257063575933,2.4358405453058851,2.1756009300321777],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>INTRAVITREAL<\/b><br>2.83 Days","<b>INTRAVITREAL<\/b><br>10.86 Years","<b>INTRAVITREAL<\/b><br>4.48 Years"],"name":"INTRAVITREAL","mode":"markers","marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"line":{"color":"rgba(127,127,127,1)"},"frame":null},{"fillcolor":"rgba(188,189,34,0.5)","type":"scatterpolar","fill":"toself","r":[0,2.7416523554810124,1.9992355756915527],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>IRRIGATION<\/b><br>0.00 Days","<b>IRRIGATION<\/b><br>30.72 Years","<b>IRRIGATION<\/b><br>2.46 Years"],"name":"IRRIGATION","mode":"markers","marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"line":{"color":"rgba(188,189,34,1)"},"frame":null},{"fillcolor":"rgba(23,190,207,0.5)","type":"scatterpolar","fill":"toself","r":[2.1365126115463857,2.5826105016406604,2.3068908667153187],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>NASAL<\/b><br>3.92 Years","<b>NASAL<\/b><br>17.89 Years","<b>NASAL<\/b><br>7.00 Years"],"name":"NASAL","mode":"markers","marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"line":{"color":"rgba(23,190,207,1)"},"frame":null},{"fillcolor":"rgba(31,119,180,0.5)","type":"scatterpolar","fill":"toself","r":[2.428741191062842,2.5764252422429004,2.249208231302255],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>OPHTHALMIC<\/b><br>10.60 Years","<b>OPHTHALMIC<\/b><br>17.51 Years","<b>OPHTHALMIC<\/b><br>5.76 Years"],"name":"OPHTHALMIC","mode":"markers","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"line":{"color":"rgba(31,119,180,1)"},"frame":null},{"fillcolor":"rgba(255,127,14,0.5)","type":"scatterpolar","fill":"toself","r":[2.2171925441435976,2.447600196396484,2.325228499422928],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>ORAL<\/b><br>5.16 Years","<b>ORAL<\/b><br>11.30 Years","<b>ORAL<\/b><br>7.45 Years"],"name":"ORAL","mode":"markers","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"line":{"color":"rgba(255,127,14,1)"},"frame":null},{"fillcolor":"rgba(44,160,44,0.5)","type":"scatterpolar","fill":"toself","r":[0,2.7507445140234701,1.8498100620328153],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>OROPHARYNGEAL<\/b><br>0.00 Days","<b>OROPHARYNGEAL<\/b><br>31.69 Years","<b>OROPHARYNGEAL<\/b><br>1.48 Years"],"name":"OROPHARYNGEAL","mode":"markers","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"line":{"color":"rgba(44,160,44,1)"},"frame":null},{"fillcolor":"rgba(214,39,40,0.5)","type":"scatterpolar","fill":"toself","r":[2.5601151885047555,2.5964825103517857,2.2934550064843671],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>PARENTERAL<\/b><br>16.57 Years","<b>PARENTERAL<\/b><br>18.75 Years","<b>PARENTERAL<\/b><br>6.69 Years"],"name":"PARENTERAL","mode":"markers","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"line":{"color":"rgba(214,39,40,1)"},"frame":null},{"fillcolor":"rgba(148,103,189,0.5)","type":"scatterpolar","fill":"toself","r":[0,2.6754049062440091,2.3745183271595858],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>PERINEURAL<\/b><br>0.00 Days","<b>PERINEURAL<\/b><br>24.52 Years","<b>PERINEURAL<\/b><br>8.81 Years"],"name":"PERINEURAL","mode":"markers","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"line":{"color":"rgba(148,103,189,1)"},"frame":null},{"fillcolor":"rgba(140,86,75,0.5)","type":"scatterpolar","fill":"toself","r":[1.9368589220215864,2.5258207203329541,2.216888414605608],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>RECTAL<\/b><br>1.99 Years","<b>RECTAL<\/b><br>14.75 Years","<b>RECTAL<\/b><br>5.16 Years"],"name":"RECTAL","mode":"markers","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"line":{"color":"rgba(140,86,75,1)"},"frame":null},{"fillcolor":"rgba(227,119,194,0.5)","type":"scatterpolar","fill":"toself","r":[2.2969481479851148,2.5028455142289183,2.3246047187978309],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>RESPIRATORY (INHALATION)<\/b><br>6.77 Years","<b>RESPIRATORY (INHALATION)<\/b><br>13.64 Years","<b>RESPIRATORY (INHALATION)<\/b><br>7.44 Years"],"name":"RESPIRATORY (INHALATION)","mode":"markers","marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"line":{"color":"rgba(227,119,194,1)"},"frame":null},{"fillcolor":"rgba(127,127,127,0.5)","type":"scatterpolar","fill":"toself","r":[2.1146023446477442,2.502113359481593,2.1928259238902528],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>SUBCUTANEOUS<\/b><br>3.64 Years","<b>SUBCUTANEOUS<\/b><br>13.60 Years","<b>SUBCUTANEOUS<\/b><br>4.75 Years"],"name":"SUBCUTANEOUS","mode":"markers","marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"line":{"color":"rgba(127,127,127,1)"},"frame":null},{"fillcolor":"rgba(188,189,34,0.5)","type":"scatterpolar","fill":"toself","r":[1.3367444741087955,2.314534775089371,2.1578623274471891],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>SUBLINGUAL<\/b><br>94.30 Days","<b>SUBLINGUAL<\/b><br>7.19 Years","<b>SUBLINGUAL<\/b><br>4.22 Years"],"name":"SUBLINGUAL","mode":"markers","marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"line":{"color":"rgba(188,189,34,1)"},"frame":null},{"fillcolor":"rgba(23,190,207,0.5)","type":"scatterpolar","fill":"toself","r":[2.2671681098061014,2.5343268347142756,2.3138760200146011],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>TOPICAL<\/b><br>6.12 Years","<b>TOPICAL<\/b><br>15.18 Years","<b>TOPICAL<\/b><br>7.17 Years"],"name":"TOPICAL","mode":"markers","marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"line":{"color":"rgba(23,190,207,1)"},"frame":null},{"fillcolor":"rgba(31,119,180,0.5)","type":"scatterpolar","fill":"toself","r":[2.1777049422667187,2.6046983578926532,2.1729179144736945],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>TRANSDERMAL<\/b><br>4.51 Years","<b>TRANSDERMAL<\/b><br>19.28 Years","<b>TRANSDERMAL<\/b><br>4.44 Years"],"name":"TRANSDERMAL","mode":"markers","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"line":{"color":"rgba(31,119,180,1)"},"frame":null},{"fillcolor":"rgba(255,127,14,0.5)","type":"scatterpolar","fill":"toself","r":[1.6502686473357955,2.4497872898574915,2.6191315522006358],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>VAGINAL<\/b><br>273.93 Days","<b>VAGINAL<\/b><br>11.39 Years","<b>VAGINAL<\/b><br>20.25 Years"],"name":"VAGINAL","mode":"markers","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"line":{"color":"rgba(255,127,14,1)"},"frame":null},{"fillcolor":"rgba(44,160,44,0.5)","type":"scatterpolar","fill":"toself","r":[2.2349685552052447,2.5328945623235626,2.286579143157045],"theta":["days_to_market","on_market_age","days_market_absent"],"hoverinfo":["text","text","text"],"hovertext":["<b>~<\/b><br>5.48 Years","<b>~<\/b><br>15.10 Years","<b>~<\/b><br>6.54 Years"],"name":"~","mode":"markers","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"line":{"color":"rgba(44,160,44,1)"},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->



</body></html>