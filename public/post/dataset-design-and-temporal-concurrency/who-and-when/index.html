<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.111.3">


<title>Dataset Design: Temporal Concurrency - Who &amp; When - Chionesu By Design</title>
<meta property="og:title" content="Dataset Design: Temporal Concurrency - Who &amp; When - Chionesu By Design">


  <link href='/favicon.ico' rel='icon' type='image/x-icon'/>



  







<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/post/">Articles</a></li>
    
    <li><a href="/r-pkgs/">R Packages</a></li>
    
    <li><a href="/data-projects/">Data Projects</a></li>
    
    <li><a href="https://www.linkedin.com/in/chionesu-george-1067b122/">LinkedIn</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">3 min read</span>
    

    <h1 class="article-title">Dataset Design: Temporal Concurrency - Who &amp; When</h1>

    
    <span class="article-date">2023-10-31</span>
    

    <div class="article-content">
      
      <nav id="TableOfContents">
  <ul>
    <li><a href="#when">When</a></li>
    <li><a href="#who">Who</a>
      <ul>
        <li><a href="#condition-1-age-vsreport-window">Condition 1: Age vs. Report Window</a></li>
        <li><a href="#condition-2-events-vsreport-window">Condition 2: Events vs. Report Window</a></li>
      </ul>
    </li>
  </ul>
</nav>
      
      <p><span style="font-size:smaller; text-decoration:italic; color:#999999; ">Updated 2023-11-01 21:59:27</span></p>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<style>
#problemStatement { color: #666666; font-family:Georgia; font-size:14pt; }
.def_sym {font-weight:bold; color:#5555DD; } 
.speech {color: #444444; font-family:Georgia; font-style: italic;font-size:16pt;  }
[id^='Math'] {font-size: 14pt; }
body {background-image: url(multicolored_lights.jpg); background-size: 2048px 300px; background-repeat: no-repeat; }
</style>
<script>
$(document).ready(function(){
  $("ul[context='definition']").hide();
  $("p[context='problemStatement']").hide();
  $("[role='toggle']").click(
    function(){
      lgrp = $(this).attr("toggleGroup");
      hint = $(this).find("hint").first();
      &#10;      if (hint.text() == "(show)"){ hint.text("&lt;hide&gt;"); }
      else { hint.text("(show)"); }
      &#10;      $("ul[toggleGroup='" + lgrp + "']").fadeToggle(10);
      $("p[toggleGroup='" + lgrp + "']").fadeToggle(10);
    }); 
  $("ul[context='definition']").first().click();
  $("p[context='problemStatement']").first().click();
})</script>
<style>
:root {
  --pale: #DEDEDE;
  --offwhite: #FFFFEF;
  --pine: #234234;
  --gray: #555555;
  --lightGray: #CCCCCC;
  --coolPurple: #3333DD55
  --footerBg: #DDDDDD; 
  --footerBorder: #BBB;
  
  --theme_background: #333;
  --theme_font_color: #CDECDE;
}

 
blockquote {
  display:block; 
}

pre  {
  display: none; 
}

hr {
  width:100%; 
  border-top: 5px;
}

sup { 
  font-size: 0.7em; 
  color:#995522; 
}

a {
  color: var(--coolPurple); 
}

 
hint, term {
  font-size: 14pt; 
  font-family: Georgia; 
  text-decoration: underline;
}

hint:hover {
  cursor: pointer; 
  font-weight: bold; 
}

 
.container-fluid .main-container .wrapper { 
  margin:auto !important; 
  width:100% !important; 
}

.wrapper { 
  overflow: auto;
}

.article {
  background-color: #EFEFEF; 
  display:block;
  padding:20px; 
  border-radius: 20px
  display: inline;
}

.content {
  width: 100% !important;
  max-width: 960px !important;
  align: center;
}

.MathJax {
  font-size: larger;
}
.mathblock {
  margin-left:5%;
  padding-left:20px;
  margin-top: 5px;
  padding-right: auto;
  display:block;
  max-width: 60%;
  color: #111111;
  border-left: solid 5px var(--pine);
}

[id ~= "htmlwidget"] {
  z-index:2;
  width:120%;
}
 

 
body {
  background-color: var(--theme_background);
  color: var(--theme_font_color);
}

comment {
  color: var(--pine); 
  font-family:Times; 
}

.warning {
  background-color:#DFDFDFEE; 
  border-top: solid 2px #AA0000; 
  border-bottom: solid 2px #AA0000;
  
}

.first{
  font-variant:small-caps; 
  font-weight:bold; 
  background-color:#EFF4FA; 
}

.sidebar {
  float:right; 
  display:block;
  width:240px; 
  background-color:#EFF4FA; 
  padding:5px; 
  margin:0 0 10 25; 
}
  
.sidebar > term {
  background-color: var(--gray); 
  color:#CCCCEE; 
  padding:5px; 
  margin-right:5px; 
}

.definition {
  display:block; 
  font-style: italic;
  font-family: Georgia;
  color: var(--coolPurple); 
  background-color: var(--pale); 
  border-top: var(--coolPurple); 
  border-bottom: var(--coolPurple); 
}

.optional {
  background-color:#FFEFFF; 
  margin-left:20px; 
  margin-bottom: 10px; 
  border-left: var(--gray); 
}

.quote {
  font-family:Georgia; 
  font-style:italic; 
  color: var(--pine)
}

.ref {color: green;}

 
</style>
<script>
$(document).ready(function(){
  $("ul[context='definition']").hide();
  $("p[context='problemStatement']").hide();
  $("[role='toggle']").click(
    function(){
      lgrp = $(this).attr("toggleGroup");
      hint = $(this).find("hint").first();
      
      if (hint.text() == "(show)"){ hint.text("<hide>"); }
      else { hint.text("(show)"); }
      
      $("ul[toggleGroup='" + lgrp + "']").fadeToggle(10);
      $("p[toggleGroup='" + lgrp + "']").fadeToggle(10);
    }); 
  $("ul[context='definition']").first().click();
  $("p[context='problemStatement']").first().click();
})
</script>
<p>Welcome back! Before getting started, let’s revisit out problem statement from the introduction:</p>
<p><span class="speech" style="font-size: 0.9em; ">&ldquo;I want to know trends related to total cost of care; Inpatient average lengths of stay; lapses in medication adherence; and member counts for the period between January first of 2019 and the end of 2020. Med lapses should show monthly totals and cumulative monthly totals. Pull members between 30 and 50 years old and have had at least two Inpatient visits within a six-week period. I need to see results by month; all services received and corresponding facilities; and member demographics.&quot;</span></p>
<p>The conventions I’ll use are also defined in the introduction <a href="../introduction#definitions--conventions" target="_blank">here</a>.</p>
<h2 id="when">When</h2>
<p>Identifying the global temporal window ( <code>\(W\)</code> ) is important as defines the frame of reference within which temporal relations are queried and transformed. In this case, the window is defined as all records having temporal columns with at least one value falling within the period <em>2019-01-01</em> to <em>2020-12-31</em>:</p>
<p><span class="mathblock"><code>\(\forall W, D^λ \Rightarrow D^\lambda_\Omega:= \Bigg\{\matrix{ W_\text{start} \le \delta^T \le W_\text{end},\enspace\enspace\#\delta^T= 1\\ \\ W_\text{start} \le \delta^T_\text{end} \wedge W_\text{end} \ge \delta^T_\text{start},\enspace\enspace\#\delta^T= 2 }\Bigg\}\)</code></span></p>
<p>, where <code>\(D^\lambda\)</code> is the data source for context <code>\(\lambda\)</code> (i.e., <em>demographics</em>, <em>claims</em>, <em>prescriptions</em>) and <code>\(W\)</code> the lower and upper dates of the global window. The first form of <code>\(D^\lambda\)</code> above reflects the case of a <em>single</em> time column in <code>\(D\)</code> and the second form when there are two.</p>
<p>Regarding the second form:</p>
<blockquote>
<ul>
<li>It allows for a much more compact dataset. I recommend giving serious consideration to transforming the single-date form into the dual-date form, especially when most of <code>\(\delta^I\)</code> is duplicative along <code>\(\delta^T\)</code> (more on this in a future article)</li>
<li>It allows for <code>\(\delta^T\)</code> to extend outside of the bounds of <code>\(W\)</code> while preserving the ability to detect temporal concurrency relative to <code>\(W\)</code></li>
<li><em><strong>Do not</strong></em> use the following logic to detect concurrency of the dual-date form with <code>\(W\)</code> (or any other dual-date range):<br><span class="mathblock"><code>\((W_\text{start} \le \delta_\text{start} \le W_\text{end} ) \wedge (W_\text{start} \le \delta_\text{end} \le W_\text{end})\)</code></span> This logical statement <strong>will</strong> fail to capture cases where <code>\(\delta^T\)</code> extends outside of <code>\(W\)</code>:<br><br><img src="/post/dataset-design-and-temporal-concurrency/2_who_and_when_files/figure-html/PROBLEM_STATEMENT-1.png" width="774" /></li>
</ul>
</blockquote>
<h2 id="who">Who</h2>
<p>The “Who” aspect of the problem statement consist of two conditions as indicated by the conjunction <em>“and”</em>:</p>
<ul>
<li><strong>C.1</strong>: <span class="speech">“… members between 30 and 50 years old”</span></li>
<li><strong>C.2</strong>: <span class="speech">“… have had at least two Inpatient visits within a six-week period”</span></li>
</ul>
<h3 id="condition-1-age-vsreport-window">Condition 1: Age vs. Report Window</h3>
<p><code>C.1</code> is the first opportunity to greatly trim down your data pull. Since <span class="speech">“When”</span> ( <code>\(W\)</code> ) is in the past, <code>C.1</code> must be pulled relative to the global window of time, not <span class="speech">“as of today”</span>. This is not explicitly stated, but think about it: <span class="speech">“… for the period between January first of 2019 and the end of 2020”</span> is your hint. Of course, when in doubt, check with the requester just to be sure.</p>
<p><code>C.1</code> presents a great case-in-point as to why carefully reading over a request <strong>before</strong> thrashing away at the keyboard is important. One could easily make the mistake of writing some SQL that correctly filters for age within the bounds of <code>\(W\)</code> but omitting the derived age from the selection.</p>
<p>Also note the span of time that <code>\(W\)</code> covers: two years, which means that everyone will have had at least one birthday</p>
<h3 id="condition-2-events-vsreport-window">Condition 2: Events vs. Report Window</h3>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    

    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

oint, only those who meet the age requirement in general have been retained. <em><strong>How</strong></em> they met the requirement is not important at this stage. When going about designing a query for retrieving observation data, I’ve learned to look for opportunities to return columns/features that allow me to use logic to derive the <span class="speech">“how”</span> when I need it rather than trying to do so from the start (only to then have to conduct data wrangling contortions at a later stage to de-duplicate an interim dataset).</p>
<h3 id="span-idomega-2omega_2-events-vsreport-windowspan"><span id="omega-2"><code>\(\omega_2\)</code>: Events vs. Report Window</span></h3>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    

    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

